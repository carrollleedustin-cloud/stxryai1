-- ============================================================================
-- STXRYAI MASTER DATABASE SETUP - RUN ALL PARTS
-- ============================================================================
-- Version: 3.0.0 | Date: December 23, 2024
-- 
-- This file is a reference guide. To run the complete setup:
-- Execute each part file IN ORDER in your Supabase SQL Editor.
-- 
-- ============================================================================
-- EXECUTION ORDER:
-- ============================================================================
-- 
-- 1. STXRYAI_MASTER_SETUP.sql       (Part 1: Extensions, Enums, Core tables)
-- 2. STXRYAI_MASTER_SETUP_PART2.sql (Part 2: Social, Messaging, Monetization)
-- 3. STXRYAI_MASTER_SETUP_PART3.sql (Part 3: AI/Narrative Engine, Global Story)
-- 4. STXRYAI_MASTER_SETUP_PART4.sql (Part 4: Creator Tools, Adaptive AI)
-- 5. STXRYAI_MASTER_SETUP_PART5.sql (Part 5: TTS, Events, Moderation, GDPR)
-- 6. STXRYAI_RLS_POLICIES.sql       (Part 6: All RLS policies)
-- 
-- ============================================================================
-- WHAT'S INCLUDED:
-- ============================================================================
-- 
-- CORE TABLES (~30):
--   â€¢ user_profiles, users, user_preferences, user_levels, user_stats
--   â€¢ stories, story_chapters, chapters, story_choices, choices
--   â€¢ reading_progress, user_reading_progress, user_progress
--   â€¢ bookmarks, story_bookmarks, comments
-- 
-- GAMIFICATION (~20):
--   â€¢ achievements, user_achievements, user_badges
--   â€¢ reading_streaks, user_reading_streaks
--   â€¢ daily_reading_goals, reading_calendar
--   â€¢ weekly_challenges, monthly_challenges, daily_challenges
--   â€¢ milestones, community_competitions, leaderboard
-- 
-- SOCIAL (~15):
--   â€¢ user_friendships, friendships, user_follows
--   â€¢ story_reviews, reviews, story_likes
--   â€¢ user_reading_lists, reading_list_items
--   â€¢ notifications, referrals, referral_rewards
-- 
-- MESSAGING (~8):
--   â€¢ conversations, messages, conversation_participants
--   â€¢ typing_indicators, message_reactions
--   â€¢ announcements, dismissed_announcements
-- 
-- COMMUNITY HUB (~10):
--   â€¢ reading_clubs, club_members
--   â€¢ discussion_forums, discussion_replies
--   â€¢ community_events, event_participants
--   â€¢ mentorship_programs, user_reputation
-- 
-- MONETIZATION (~15):
--   â€¢ user_wallets, coin_transactions, subscriptions
--   â€¢ content_unlocks, offline_downloads
--   â€¢ premium_story_pricing, story_purchases
--   â€¢ creator_payouts, creator_earnings, creator_tips
--   â€¢ story_collections, character_packs
-- 
-- AI & NARRATIVE ENGINE (~25):
--   â€¢ ai_generations, reader_story_sessions
--   â€¢ story_series, series_books
--   â€¢ persistent_characters, character_events, character_book_states
--   â€¢ world_elements, narrative_arcs
--   â€¢ canon_rules, canon_violations, continuity_notes
--   â€¢ global_stories, global_story_chapters, global_story_actions
-- 
-- CREATOR TOOLS (~15):
--   â€¢ story_drafts, chapter_drafts, draft_comments
--   â€¢ story_collaborators, collaboration_sessions
--   â€¢ writing_templates, marketing_campaigns
--   â€¢ creator_analytics_snapshots, story_performance_tracking
-- 
-- ADAPTIVE AI (~20):
--   â€¢ user_reading_preferences, story_adaptation_log
--   â€¢ choice_predictions, personalized_narrative_paths
--   â€¢ ai_writing_suggestions, plot_doctor_analyses
--   â€¢ ai_idea_generations, writing_assistant_sessions
--   â€¢ user_engagement_metrics, story_npcs, npc_memory
-- 
-- TTS & LIVE EVENTS (~12):
--   â€¢ tts_voices, character_voices, audio_generations
--   â€¢ audio_playback_sessions, user_tts_preferences
--   â€¢ live_events, event_registrations, event_messages
--   â€¢ event_questions, event_polls, poll_responses
-- 
-- MODERATION & GDPR (~10):
--   â€¢ ai_moderation_logs, moderation_queue, content_flags
--   â€¢ user_consents, data_export_requests, data_deletion_requests
--   â€¢ privacy_settings, cookie_preferences
-- 
-- ============================================================================
-- TOTAL: ~180+ TABLES
-- ============================================================================
-- 
-- ALSO INCLUDES:
--   â€¢ All required ENUMS (25+)
--   â€¢ All INDEXES for performance (100+)
--   â€¢ All RLS POLICIES for security
--   â€¢ All FUNCTIONS for business logic
--   â€¢ All TRIGGERS for automation
--   â€¢ SAMPLE DATA (achievements, stories, donation tiers)
-- 
-- ============================================================================
-- NOTES:
-- ============================================================================
-- 
-- 1. Run in a FRESH Supabase project
-- 2. Execute parts in order (1-6)
-- 3. Each part depends on previous parts
-- 4. If a table already exists, it will be skipped (IF NOT EXISTS)
-- 5. After setup, verify with: SELECT COUNT(*) FROM pg_tables WHERE schemaname = 'public'
-- 
-- ============================================================================

SELECT 'ðŸ“‹ Read this file for setup instructions. Execute parts 1-6 in order.' AS instructions;


